<!DOCTYPE html>
<html>
<head>
	<title>Compatibility Questionnaire</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

</head>
<body>
	<div class="container">
			<div class="page-header">
				<h1>Friend Finder <small>Survey Questionnaire</small></h1>
			</div>
			<div class="page-header">
			
				<h2>About Yourself</h2>
				<form id="formInfo" class="form-horizontal">
					<div class="form-group">
						<label for="inputName" class="col-sm-2 control-label">Name (REQUIRED)</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" id="inputName">
						</div>
					</div>
					<div class="form-group">
						<label for="inputPicURL" class="col-sm-2 control-label">Link to Photo Image (REQUIRED)</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" id="inputPicURL">
						</div>
					</div>
				</form>
			</div>


		<div id="questions="></div>


	<div id="buttons">
		<button id="submit">Submit</button>
		<button id="reset">Reset</button>
	</div>
	</div>

<script>

var allQuestions = [
	"I tend to think people have ulterior motives",
	"I am most happy when I'm by myself",
	"I'd rather figure problems out on my own",
	"A night out with good friends without drinking or noise is my kind of night",
	"A one on one with a drink and good discussion is an awesome night",
	"I tend to blame others when things go wrong",
	"I'd rather people tell me what I need to hear than what I want to hear",
	"Everyone deserves a second chance",
	"Everyone should do what makes them happy",
	"Life moves on, so we should not have regrets"
];

var choices = [
	"Strongly Agree",
	"Agree",
	"Neutral",
	"Disagree",
	"Strongly Disagree"
];

var currentURL = window.location.origin;

(function () {
	for(i = 0; i < allQuestions.length; i++){
		var questionHeader = $("<h3></h3>").text("Question " + (i + 1));
		var question = $("<h4></h4>").text(allQuestions[i]);
		answerChoices(i);
	}
})();

function answerChoices(questionNum){
	for(j = 0; j < 5; j++){
		var divInput = "<div class='radio'><label><input type='radio' id='answ" + (questionNum + 1) + "' name='answ" + (questionNum + 1) + "' value='" + (j + 1) + "'>" + choices[j] + "</label></div>";
		$("#questions").append(divInput);
	}
}

$("#submit").click(function(){
	var currentURL = window.location.origin;

	var newFriend = {
		name: $("#inputName").val().trim(),
		photo: $("#inputPicURL").val().trim(),
		scores: []
	};


		if(!newFriend.name){
			alert("Please enter your name");
			return;
		}

		if(!newFriend.photo){
			alert("Please enter a URL for your photo");
			return;
		}

		for(i = 0; i < allQuestions.length; i++){
			if($("#answ" + (i + 1) + ":checked").val()){
				newFriend.scores[i] = parseInt($("#answ" + (i + 1) + ":checked").val());
			}
			else if (!$("#answ" + (i + 1) + ":checked").val()){
				alert("Please answer all questions");
				return;
			}
		}
	friendQuery(newFriend);
});

function friendQuery(newFriend){

		$.ajax({url: currentURL + "/api/friends", method: "GET"})
			.done(function(friendData) {
				var compat = [];

				for(i = 0; i < friendData.length; i++) {
					var friendScore = friendData[i].scores;
					var totalDif = 0;

					console.log(friendData[i].name + ": " + friendScore);
					console.log("Your Score: " + newFriend.scores);
					var compare = [];

					
</body>
</html>